# 搜狗细胞词库全词库
## 实现功能
* 1.爬取了[搜狗细胞词库](https://pinyin.sogou.com/dict/)中的所有词库文件
* 2.对搜狗输入法的scel格式的细胞词库文件进行解析。

## 注意
* 需要在代码目录下构建`scel`和`txt`2个空文件夹
* 我自己已经做好的词库结果在`词库.txt`内

## 代码执行顺序
* 1.`get_scel.py` 获取所有的scel文件 并写入`scel`文件夹内
* 2.`scel_to_txt.py` 将scel文件逐个解析 并写入`txt`文件夹内
* 3.`main.py` 合并所有txt文件


以下是一个数据集：我自己构建了2列变量*X，Y*。其中$$Y = 0.2X + \ \varepsilon,\
\epsilon \sim N\left( 0,1 \right)$$我们要构建一个模型$$Y =
aX$$预测*Y*。让我们先用已有数据建立一个表格：

| X | 0.723 | 0.923 | \-0.656 | \-1.182 | \-0.268 | 0.295   | 0.281   | \-2.207 | 0.422 | 0.370   |
|---|-------|-------|---------|---------|---------|---------|---------|---------|-------|---------|
| Y | 0.091 | 0.123 | \-0.166 | \-0.515 | \-0.086 | \-0.010 | \-0.168 | \-0.276 | 0.260 | \-0.022 |

如上表所示，自变量是X，因变量是Y，我们可以绘制它们的散点图

![散点图.png](https://upload-images.jianshu.io/upload_images/1435099-c749cadd2d9b04fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

现在用一个简单的线性模型，对历史数据进行拟合，根据X预测Y(pre)：

![2.png](https://upload-images.jianshu.io/upload_images/1435099-53391e8f89ed3e11.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


在上图中，虚线是我们的线性模型，因此鉴于横坐标和纵坐标信息，它的表达式是：Y(pred)= aX。所以我们的目标是找到最好的a，使误差项SSE最小：

$$SSE = \frac{\sum_{i = 1}^{n}{(Y_{i} - aX_{i})}^{2}}{n} = \frac{\sum_{i =
1}^{n}{{Y_{i}}^{2} - 2aX_{i}Y_{i} + a^{2}{X_{i}}^{2}}}{n}$$

（SSE只是一种方法，还可以用其他方法统计误差）

我绘制了损失函数的图像可以看得出来这个函数大约在0.2左右取到最小值

![3.png](https://upload-images.jianshu.io/upload_images/1435099-8f23e0b2bedab6a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


好了，下面我们就要用到梯度下降了。梯度下降是一种优化算法，它能帮我们找到优化a，并保证模型预测的准确率。下面是具体步骤：

-   步骤1：用随机值初始化a，并计算误差（SSE）。

-   步骤2：计算梯度，即当权重从初始随机值逐渐变小时SSE的变化。这有助于我们把a朝SSE最小的方向优化。

-   步骤3：用梯度调整a以使SSE最小化，以达到最佳值。

-   步骤4：用新a进行预测，并计算新的SSE。

-   步骤5：重复步骤2和3，直到再次调整权重后不再明显降低预测错误率。

如果说这样描述有些泛泛而谈，下面我们就结合EXCEL详细介绍。

我们首先可以求解得到损失函数关于 a的梯度（导数）为$$\frac{\sum_{i = 1}^{n}{-
X_{i}Y_{i} + a{X_{i}}^{2}}}{n}$$

首先给定a初始值0，其对应的损失函数值为0.025和梯度为-0.1579，这里我们设置学习率为1，那么a1
= 0 -1\*（ - 0.1579） = 0.1579
，然后继续计算对应的梯度和损失函数直到损失函数为0或者梯度为0或者满足迭代次数等条件，最后我们可以求得a
= 0.183

| 迭代次序 | a     | loss  | loss'(a) |
|----------|-------|-------|----------|
| 0        | 0     | 0.025 | \-0.1579 |
| 1        | 0.158 | 0.011 | \-0.0218 |
| 2        | 0.18  | 0.01  | \-0.003  |
| 3        | 0.183 | 0.01  | \-0.0004 |
| 4        | 0.183 | 0.01  | \-0.0001 |
| 5        | 0.183 | 0.01  | 0        |
